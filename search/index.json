[{"content":" 陪我了4年，走过本科和硕士的笔电摔了，没什么大事，还能用，但是B、C壳变形了，屏幕也漏光了，虽然能正常使用但是我好担心出差的时候突然一个不吱声坏了，所以还是淘一个备用机试试。\n本着已经有了两台win PC了，出差也用不到多少性能，所以想试试macOS系统，正好学校里一个学弟想出一个M1的Macbook Air，于是谈了一下2700大米拿下了，不得不说乔布斯的设计是真好看，最后一代楔形设计的MacBook Air了，没有风扇，超安静而且续航妥妥够了，本身也没有什么磕碰，除了键盘有点打油，打算买张键盘膜贴一下。 以此贴记录一下折腾macOS的过程，瑞思拜。\n上的第一个当 键盘打油挺严重的，买了个膜，好G2贵，但是质量一般，第一个当\n第二个当，键盘膜是不透光的，那岂不是晚上用不了，直接pass了，贴到一半才发现，而且很难揭下来，最后只贴了空格键，还好我的nuphy还没有二手出掉，直接拿来用！🤣\nHomebrew 1 2 3 4 5 6 7 8 # install homebrew /bin/bash -c \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\u0026#34; # open zsh config vim ~/.zshrc # disable autoupdate export HOMEBREW_NO_AUTO_UPDATE=true PicGo Install 从官网上下的包总是显示损坏，无语。。。。。\n改用homebrew(这玩意挺好使hh)\n1 brew install picgo --cask 不好使，下的不是最新版本的，有的功能无法使用\nmacOS疑似有点太封闭了，需要重置文件属性才能正常安装第三方软件😅:\n1 xattr -cr \u0026lt; path to xxx.dmg \u0026gt; 重置完基本就能正常安装了。\nmoonlight串流丢包 最近在用Moonlight串流的时候总是卡顿丢帧，显示串流质量差，但是ping主机的时候延迟是正常的，7～10ms样子，打开监控的才发现是丢包率过高，最高的时候甚至到了50%多，直接掉线了，寻思不正常，我以为是宿舍网络的问题，重启宿主机后恢复正常，但是再次串流的时候还是一样的老毛病，但是在同一局域网的windows主机上完全没问题，甚至码率可以设的更高，怀疑是不是MacBook网卡的问题，但是Mac的网卡更换以及驱动更新都太过麻烦，查了github上的issue，发现有人也有同样的问题，不只是M1的，M系列的Mac都有问题，最直接的解决方式是，把路由器的5G Wi-Fi信道调整到149。。。。。。\n调整完Wi-Fi信号后暂时正常，还有待观察。\n添加快捷键 影音播放软件+缩略图生成 IINA+QuickLook Video\n","date":"2025-03-10T20:11:14+08:00","image":"https://raw.githubusercontent.com/Rei-XY/Rei_PicGo/master/Blog_post/MacOS.png","permalink":"https://blog.christinaxy.fun/post/macos/","title":"NewMac"},{"content":" 序 最初打算用公网服务器+Frp来实现内网穿透，这是稳定的方案，但使用下来会有几个问题。\nmstsc走公网ip+端口号的方式，在我理解里是三根水管相连，数据要通过云服务器上传，不只是端口映射，木桶效应在于云服务器的带宽限制(2~3M过于卡顿). Frp会一直扫公网ip的端口号，尽管可以添加SSL，但是远程桌面走的是tcp服务，stcp不能成功打开udp的远程桌面，也可能是我没配置正确，暂时还在寻找原因. 宿舍用moonlight串流工位电脑，用zerotier会比较方便和管理. 之前不喜欢zerotier的原因是因为planet的服务器在国外，用户多的时候会打洞失败，而且延迟巨高！遇到过好几次了，但是现在我有了国内的云服务器，那就可以类似frp的方式做个端口映射，就变成\u0026quot;两根水管相连\u0026quot;，这样的话就是木桶效应是工位网络的上行带宽。\n服务器配置Zerotier+Moon 安装zerotier 1 2 3 4 5 6 7 8 9 10 11 12 # Linux 下载安装 curl -s https://install.zerotier.com/ | sudo bash # 验证安装情况 zerotier-cli info # 启动并设置开机自启动 systemctl start zerotier-one.service systemctl enable zerotier-one.service # 加入到个人的虚拟局域网 zerotier-cli join Network-ID 安装成功后显示的信息:200 info 39a50xxxxx 1.14.2 ONLINE，其中39a50xxxxx为该设备的zerotier-id，1.14.2是zerotier的版本号。\n配置moon 1 2 3 4 5 # 进入配置目录 cd /var/lib/zerotier-one # 生成初始配置。读取 identity.public 中的公钥信息，生成初始的 moon 节点配置的 JSON 文件: zerotier-idtool initmoon identity.public \u0026gt; moon.json moon.json包含了设备的id信息等等，同时需要额外配置ip地址和节点信息，在stableEndpoints一栏添加公网ip和端口号(默认是9993)，注意格式问题Ipv4 Addr/9993以及在云服务器放开9993端口(udp协议)。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 { \u0026#34;id\u0026#34;: \u0026#34;39a50xxxxx\u0026#34;, \u0026#34;objtype\u0026#34;: \u0026#34;world\u0026#34;, \u0026#34;roots\u0026#34;: [ { \u0026#34;identity\u0026#34;: \u0026#34;39a50xxxxx:0:90bc7bf3e1d39a2df373f3fcfc5fc103c6b333226f0949d47906b1c613ff6441850ad3217184277b5b65e381b59289d17561978393fd77ee5ff9d36c37xxxxx\u0026#34;, \u0026#34;stableEndpoints\u0026#34;: [\u0026#34;Ipv4 Addr/9993\u0026#34;] } ], \u0026#34;signingKey\u0026#34;: \u0026#34;883bbd62ba065db9879c6bad1ba874b567ff8f7d25349e811669270c0dcb7e4e2989e02cc2ebc6681da2f5b9b7037c3c66a68eb5b6843d5067e4db3c1dxxxxx\u0026#34;, \u0026#34;signingKey_SECRET\u0026#34;: \u0026#34;4a72efbf7da50602ba01e413588badb9294a64f27bdc600c297f2e591d7b437ac856cfa4ded3e5478fb914054df5d96ef2ed4ce667e5603669f4c7799e1xxxxx\u0026#34;, \u0026#34;updatesMustBeSignedBy\u0026#34;: \u0026#34;883bbd62ba065db9879c6bad1ba874b567ff8f7d25349e811669270c0dcb7e4e2989e02cc2ebc6681da2f5b9b7037c3c66a68eb5b6843d5067e4db3c1ddxxxxx\u0026#34;, \u0026#34;worldType\u0026#34;: \u0026#34;moon\u0026#34; } 配置完毕，保存并退出，最后基于moon.json文件生成最终的moon配置文件:\n1 2 3 4 5 6 7 8 9 10 11 # 新建文件夹，方便管理 mkdir moons.d # 生成最终配置文件。基于 moon.json 配置文件，生成最终的 moon 配置文件（通常命名为 000000xxxx.moon）： zerotier-idtool genmoon moon.json # 移动moon配置文件 mv 000000xxxx.moon moons.d/ # 重启服务 systemctl restart zerotier-one 最终会生成带zerotier-id的moon配置文件，文件名就是moon-id，在老版本是16位的，新版本(1.12.2ver后)都是10位的，即不含前面的6个数字0;\n000000xxxx.moon是个二进制文件，不可读，而且带加密签名，将这个文件下载到服务端电脑上。\n客户端添加moon 以我的PC为例，Christina - win1123H2 - Zerotier 1.14.2 \u0026amp; moon的配置文件\n进入zerotier的配置路径，默认是C:\\ProgramData\\ZeroTier\\One，新建一个moons.d文件夹并将000000xxxx.moon文件放置其中(需要管理员权限)，在services.msc中重启zerotier服务。\n以管理员身份启动powershell:\n1 2 3 4 cd C:\\ProgramData\\ZeroTier\\One # 检查路由 zerotier-cli listpeers listpeers可以看到虚拟局域网下的各个节点信息和连接情况：\n1 2 3 4 5 6 7 8 200 listpeers \u0026lt;ztaddr\u0026gt; \u0026lt;path\u0026gt; \u0026lt;latency\u0026gt; \u0026lt;version\u0026gt; \u0026lt;role\u0026gt; 200 listpeers 39a50xxxxx 1.95.xxxxxx/9993;2904;2808 96 1.14.2 MOON 200 listpeers 778cdxxxxx - -1 - PLANET 200 listpeers bbd67xxxxx 192.168.5.8/22591;2906;2896 9 1.14.0 LEAF 200 listpeers cafe0xxxxx - -1 - PLANET 200 listpeers cafe8xxxxx - -1 - PLANET 200 listpeers cafefxxxxx - -1 - PLANET 200 listpeers d2f9cxxxxxb 192.168.5.5/9993;8190;8184 5 1.14.2 LEAF 其中，\u0026lt;ztaddr\u0026gt;代表zerotier-id，\u0026lt;path\u0026gt;代表路由，\u0026lt;latency\u0026gt;代表延迟，\u0026lt;role\u0026gt;代表节点的身份信息\nPLANET就是zerotier官方的中转节点，-1基本上就是官方的节点挂了\u0026hellip;. MOON是自建的zerotier的节点，延迟96ms LEAF是虚拟局域网的各个设备节点 一些额外的指令：\n1 2 3 4 5 # 加入moon节点 zerotier-cli orbit \u0026lt;world ID\u0026gt; \u0026lt;seed\u0026gt; # 取消加入moon节点 zerotier-cli deorbit \u0026lt;moon-id\u0026gt; 这样基本就配置成功了，走虚拟路由也方便异地串流；\nDone\n2025.02.27 17:39\n","date":"2025-02-27T16:38:38+08:00","image":"https://blog.christinaxy.fun/post/zerotier-moon/%E5%8D%9A%E5%AE%A2%E5%B0%81%E9%9D%A2Cover_hu_4243f6ff9238074a.png","permalink":"https://blog.christinaxy.fun/post/zerotier-moon/","title":"Zerotier+Moon"},{"content":" 观影插曲 看这部电影的时候发生了一个插曲，影片放映到1/3的时候，影厅的放映机坏了，被迫中止然后换到下一个片场继续看，挺神奇的，这是我长这么大头一次碰到这样的事。 观影后的碎碎念 画面的色彩我很喜欢，高明度，低饱和，亮色调，色彩观感上很舒服。\n但是故事性呢?我觉得用淡水文艺片去形容吧，整部片子给我的感觉是很平淡的，没有什么叙述，淡如水，就像是日记本里稀松平常的一页。\n开头的旁白窦子说的那句\u0026quot;我是什么颜色呢?\u0026quot;，再到最后结尾窦子再花园里起舞，望向蓝天出现的那一抹淡红回答了这个问题外，就几乎没什么故事性了。作永君为什么退学我也不明白，也许是女校的教育？\n很文艺的一部片，很多情绪是难以表述的，只能用色彩去形容，我感觉票房不会很高，能排片期过了不知道能到多少。\n看完之后再来回头回味一下，又好像能抓住点什么了，我很羡慕少年时代的友谊，我时常想对于别人我可能就是个可有可无的存在，所以我看到路易给妈妈打电话说晚上不回去了，要陪窦子和君过夜，最后补了一句\u0026quot;我交到朋友了\u0026quot;，还是有那么点感触的。但是抛开这一层，我感觉窦子和君还是相当的单纯啊，就这么相信路易了，但也从侧面说明了三人间的友谊是可贵的吧。\n青春对于大多数人都是有遗憾的吧，窦子因为先天的因素，对世界的感受不同于常人，影片里也说到\u0026quot;怕被别人当成怪人\u0026quot;，小时候学芭蕾也没有坚持学下去；作永君这个角色是我不太能理解的，应该就是常见的乖乖女类型的角色，说是和哥哥一块被奶奶拉扯大，可能是不想走跟奶奶一样的道路吧，就辍学去玩音乐了；路易应该是子承祖业，平日里在岛上没有什么同龄玩伴，也是典型的乖儿子形象，最后也是选择面对现实，上大学，继承父业这种(剧里我看到有一个合照的特写，路易似乎有一个兄弟，我还以为会有什么别的展开，但没有)，还有其他几个配角，比如女校的日吉子老师，君的奶奶这些\u0026hellip;与常见的家庭矛盾不同，影片里的3位主角都是被爱包围的，窦子犯错回家的时候，妈妈没有责怪，反而会说\u0026quot;本来还会担心窦子晕大巴，修学旅行会不舒服\u0026quot;,走的时候也给窦子买了很多东西带回宿舍；君的奶奶得知君退学后也没有苛责君，相反我觉得奶奶应该很早就知道君不去上学了，有一处奶奶在上班时的特写，这一处的留白我觉得奶奶还是或多或少猜到了；路易的妈妈对待路易也是，没有传统的那种家庭冲突，各自的家庭也都支持他们，在最后庆典每个人都盛装出席。\n情绪流的电影是需要走进去的，最后干巴爹的呐喊，是小君含蓄的爱的表白，但是我旁别的几位没有进去而是觉得破音非常不解，\u0026ldquo;如果有一个人能坚定的选择我，那会让我一辈子都不会忘记的\u0026rdquo;。\n想来结尾有这样一句台词『接受无法改变的事情，尽力改变还能改变的事情』，应该是这么说的吧，这种类鸡汤的定型文居然能给我一定的触动还是让我觉得这场电影没白来，2月的自己相当的颓废，我不知道该干些什么，可能也是时候去迈出第一步了，NF型的人是不是都这么踌躇呢？就像绿皮书的\u0026quot;很多人都害怕迈出第一步\u0026quot;，我不知道我在害怕什么，我在担心什么，我在忧郁什么，我不知道我为什么心情不好，是太多东西想得到没得到，还是很多东西想实现却没能力实现呢？应该是都有吧，也许要收下心?当自己的能力托不起自己的欲望的时候，是要沉下心来好好学习，专心看书了。\n2025.02.24 23:41\nSome videos 看完后刷到了赫萝老师的投稿，从赫萝老师的角度也能看到许多当时观看时没有在意的点:\n小君鞋子特写的低机位镜头出现了很多次，当时没有在意，导演给出的解释是“有时候人们说出不合时宜的话，或者说出自己不是真心想说的话时，会有脚部、手部还有眼球的细微运动，这是把自己关在烦恼之中”，总之就是细节描写啦 日吉子老师有一段话『你已经是毕业生了，在你自己的时间里。』对一定人群这句话是个暴击，对于我，我可能会这样说『在真实的时间里，我已经是毕业生了，但在我自己的时间里，我还没有毕业。』 日吉子老师是新垣结衣配音的，这个我在谢幕的时候看到都惊呆了，完全没听出来，而且看了最近的照片，发现gakki也老了啊。 每个角色的反面情绪，窦子是自卑感，君是撒谎的负罪感，路易是责任感 路易有一个设定，对音乐过耳不忘，拥有着绝对的音感(我就说你小子玩特雷门琴这种，一看就不是普通人的天赋哥!)，路易的父亲在其三岁时出走杳无音讯，亲哥哥在初二的夏天溺海去世(所以才有那个合照的特写)，所以路易身上隐约透露出来的是责任感。 小君的妈妈和奶奶都是单身女性，小君的退学是东京的妈妈盖章签名的，妈妈也没有追问原因(,,ԾㅂԾ,,) 影片的一个属性是乐队，或者说音乐，而这里的音乐不是像mygo或者mujica这种，必须要去演出，武道馆这种目标的，而白猫堂这里的音乐是爱好，是能分享情绪的出口，无功利，是困境中照亮每个人心底的一束光。 山田尚子：“这部作品刻画了那些正准备开始，或已经迈出重要第一步的人的故事，我相信很多人都能共鸣，另外这部作品的live演出也很帅气，希望大家都能去电影院体验。”所以这是青春纪录片吧，记录介于孩子和大人之间少男少女们跨出那一步的瞬间。\n主观评分 🌟🌟🌟⭐\n","date":"2025-02-24T21:06:57+08:00","image":"https://blog.christinaxy.fun/post/2025movie-%E4%BD%A0%E7%9A%84%E9%A2%9C%E8%89%B2/%E4%BD%A0%E7%9A%84%E9%A2%9C%E8%89%B2%E6%B5%B7%E6%8A%A5_hu_90940e478e0e0bd.jpg","permalink":"https://blog.christinaxy.fun/post/2025movie-%E4%BD%A0%E7%9A%84%E9%A2%9C%E8%89%B2/","title":"你的颜色|山田尚子"},{"content":"因为自个的台式机（Christina）和服务器（Maffia）都放在实验室工位，有的时候人不在工位需要远程控制，之前一直用的是向日葵，但是向日葵免费版本的带宽实在是太小了，免费用户的体验实在是不太好，常常断流，而且会有弹窗广告，还是当备案，首选搭建别的穿透服务来远程控制。\nZerotier Zerotier是用来搭建虚拟局域网的工具，在没有公网Ipv4的情况下，还是挺好用的，但是它的服务器毕竟是国外的，有的时候常常打洞失败，并且有的时候会出BUG，还没细究是Win版远程桌面的锅还是是什么别的原因（つづく）\n准备工作 软件下载 这个是Zerotier的官网下载地址： Download - ZeroTier，Christina是Windows系统，正常安装就好，一般这种服务本身不太占内存，就直接装在C盘了，免去一些配置路径和依赖。\nZerotier注册 注册一个自己的虚拟局域网，由zerotier服务器来配置ip和路由管理，免费版本一个Network下能提供至多25个设备支持（一般是足够了），权限设置成私人，对设备进行授权管理。 注册完毕并创建一个网络服务后，会获得该网络下的网络ID(Networkd ID)，再选择性得配置好该网络的名称和相关说明就好。 将设备加入到虚拟局域网当中 打开下载好的zerotier程序，右键进行配置，能看到当前主机的ID，选择「Join New Network」,填入Step2创建好的网络ID，再回到网页配置中（一般会有一点延迟），能看到Members选项下会出现未授权的设备，Address对应到当前主机的ID，进行对应的授权后就能看到Zerotier配置的ip(Managed IPs)，这样就将当前主机加入到创建好的虚拟局域网当中了。 我这边加入了4台自己的设备，可以尝试ping一下各台主机来进行测试。\n能正常ping通就表明成功了\n题外 zerotier的服务器在海外，不受控，有的时候服务会失效，可以额外搭建moon来加速，感觉还是多一步不方便，之前淘了一个云服务器，有了公网ip就选择开frp服务了，更方便一点。\nFrp 之前淘了台云服务，有了公网服务器，那这不是可以肆意妄为?，肆意折腾。 Frp可以自定义TLS加密，支持frpc和frps之间的流量通过TLS协议加密，并且支持客户端或服务端单向验证，双向验证等功能。 当 frps.toml 中 transport.tls.force = true 时，表示 server 端只接受 TLS 连接的客户端，这也是 frps 验证 frpc 身份的前提条件。如果 frps.toml 中 transport.tls.trustedCaFile 内容是有效的话，那么默认就会开启 transport.tls.force = true。\n从 v0.50.0 开始，transport.tls.enable 的默认值将会为 true，默认开启 TLS 协议加密。 如果 frps 端没有配置证书，则会使用随机生成的证书来加密流量。 默认情况下，frpc 开启 TLS 加密功能，但是不校验 frps 的证书。\n服务端-配置 下载服务端软件 下载地址: Releases · fatedier/frp WebChristina用的系统镜像是Ubuntu22.04，对应frp_0.61.1_linux_amd64版本\n上传\u0026amp;解压 1 2 3 4 5 6 #打开/usr/local路径文件夹 cd /usr/local #创建frp文件夹，并且进入 mkdir frp \u0026amp;\u0026amp; cd frp #解压frp_0.61.1_linux_amd64.tar.gz文件，并打开此文件夹 tar -zxvf \u0026#39;frp_0.61.1_linux_amd64.tar.gz\u0026#39; \u0026amp;\u0026amp; cd \u0026#39;frp_0.61.1_linux_amd64\u0026#39; 服务器配置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #编辑frps配置文件 vi frps.toml # 客户端与服务连接端口 bindPort = 7000 # 客户端连接服务端时认证的密码 auth.method = \u0026#34;token\u0026#34; auth.token = \u0026#34;xxxxx\u0026#34; # http协议监听端口 vhostHTTPPort = 28080 # web界面配置 webServer.addr = \u0026#34;0.0.0.0\u0026#34; webServer.port = 7500 webServer.user = \u0026#34;xxxxx\u0026#34; webServer.password = \u0026#34;xxxxx\u0026#34; 确认无误后，保存并退出。\n运行frps服务 1 2 #编辑/etc/systemd/system/frps.service文件 sudo vi /etc/systemd/system/frps.service 1 2 3 4 5 6 7 8 9 [Unit] Description=frp server After=network.target syslog.target Wants=network.target [Service] Type=simple ExecStart=/usr/local/frp/frp_0.61.1_linux_amd64/frps -c /usr/local/frp/frp_0.61.1_linux_amd64/frps.toml [Install] WantedBy=multi-user.target 确认无误后保存并退出，并在系统启动frps服务:\n1 2 3 4 5 6 7 8 9 10 #检查frp配置文件是否正确 sudo systemctl status frps.service # 启动frp sudo systemctl start frps # 停止frp sudo systemctl stop frps # 重启frp sudo systemctl restart frps #设置开机自启 sudo systemctl enable frps 记得在服务器内打开各项服务的端口\n客户端-配置 下载客户端软件 下载地址: Releases · fatedier/frp Christina用的系统镜像是Win1123H2，对应frp_0.61.1_windows_amd64版本\n客户端环境配置 正常解压到工作目录，客户端只需要配置frpc.toml就可以\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 serverAddr = \u0026#34;`服务器的公网IP`\u0026#34; serverPort = 7000 auth.method = \u0026#34;token\u0026#34; auth.token = \u0026#34;xxxxxx\u0026#34; # frp 日志配置，按需配置 log.to = \u0026#34;./frpc.log\u0026#34; log.level = \u0026#34;info\u0026#34; log.maxDays = 5 #TCP的配置 [[proxies]] name = \u0026#34;9600X_Christina_RDP\u0026#34; type = \u0026#34;tcp\u0026#34; localIP = \u0026#34;127.0.0.1\u0026#34; localPort = 3389 remotePort = 23389 简单的配置结束了，可以在终端里打开对应的目录，运行服务并检查是否正常开启了:\n1 .\\frpc.exe -c frpc.toml 检查对应的日志文件\n1 2 3 4 5 2025-02-24 10:56:49.852 [I] [sub/root.go:142] start frpc service for config file [frpc.toml] 2025-02-24 10:56:49.862 [I] [client/service.go:295] try to connect to server... 2025-02-24 10:56:50.015 [I] [client/service.go:287] [xxxxx] login to server success, get run id [xxxxx] 2025-02-24 10:56:50.015 [I] [proxy/proxy_manager.go:173] [xxxxx] proxy added: [9600X_Christina_RDP] 2025-02-24 10:56:50.066 [I] [client/control.go:168] [xxxxx] [9600X_Christina_RDP] start proxy success 让服务后台运行，设置开机自启动 1.将下列代码存为一个.vbs文件，例如 frpcStart.vbs\n1 2 set ws=WScript.CreateObject(\u0026#34;WScript.Shell\u0026#34;) ws.run \u0026#34;cmd /c E:\\900_Tools\\913_Frp\\frp_0.61.1_windows_amd64\\frpc.exe -c E:\\900_Tools\\913_Frp\\frp_0.61.1_windows_amd64\\frpc.toml\u0026#34;,0 2.把这个vbs文件放到计算机的启动下面 win11的启动路径是这个 C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Startup 对vbs不熟，就按绝对路径处理了\n题外存疑 Windows的远程桌面rdp服务走的是tcp\u0026amp;udp吧，但是frpc\u0026amp;frps配置都写tcp协议 虽然官方文档写的是默认开启tls加密，我尝试加了证书（这个会后续更新），但是要开启stcp服务后，rdp就无法使用了，猜测是stcp和tcp不一样ㄟ( ▔, ▔ )ㄏ ","date":"2025-02-24T10:00:00+08:00","image":"https://blog.christinaxy.fun/post/webservice-frp/cover_hu_186030ce29d149be.png","permalink":"https://blog.christinaxy.fun/post/webservice-frp/","title":"关于内网穿透服务"},{"content":"主题修改 字体修改 MacBook上感觉文档的字体渲染挺锐的，怪不得好多人拿Mac办公，确实看的舒服，但是网页上代码块的渲染有点难受，平常的win本一直是用JetBrains Mono，调整一下:\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!-- assets/scss/variables.scss --\u0026gt; // add fonts api from google fonts @import url(\u0026#39;https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800\u0026amp;display=swap\u0026#39;); :root { --sys-font-family: -apple-system, BlinkMacSystemFont, \u0026#34;Segoe UI\u0026#34;, \u0026#34;Droid Sans\u0026#34;, \u0026#34;Helvetica Neue\u0026#34;; --zh-font-family: \u0026#34;PingFang SC\u0026#34;, \u0026#34;Hiragino Sans GB\u0026#34;, \u0026#34;Droid Sans Fallback\u0026#34;, \u0026#34;Microsoft YaHei\u0026#34;; --base-font-family: \u0026#34;Lato\u0026#34;, var(--sys-font-family), var(--zh-font-family), sans-serif; --code-font-family: \u0026#34;JetBrains Mono\u0026#34;, Menlo, Monaco, Consolas, \u0026#34;Courier New\u0026#34;, var(--zh-font-family), monospace; } 版式修改 1.样式修改:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 // 页面基本配色 :root { // 全局顶部边距 --main-top-padding: 30px; // 全局卡片圆角 --card-border-radius: 25px; // 标签云卡片圆角 --tag-border-radius: 8px; // 卡片间距 --section-separation: 40px; // 全局字体大小 --article-font-size: 1.8rem; // 行内代码背景色 --code-background-color: #f8f8f8; // 行内代码前景色 --code-text-color: #e96900; // 暗色模式下样式 \u0026amp;[data-scheme=\u0026#34;dark\u0026#34;] { // 行内代码背景色 --code-background-color: #ff6d1b17; // 行内代码前景色 --code-text-color: #e96900; } } //选中文本样式美化 ::selection { color: #ffff; background: #977a55; } //------------------------------------------- // 设置选中字体的区域背景颜色 //修改选中颜色 ::selection { color: #fff; background: #34495e; } a { text-decoration: none; color: var(--accent-color); \u0026amp;:hover { color: var(--accent-color-darker); } \u0026amp;.link { color: #4288b9ad; font-weight: 600; padding: 0 2px; text-decoration: none; cursor: pointer; \u0026amp;:hover { text-decoration: underline; } } } 2.布局修改:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 /* 归档页改双栏 */ @media (min-width: 1024px) { .article-list--compact { display: grid; grid-template-columns: 1fr 1fr; background: none; box-shadow: none; gap: 1rem; article { background: var(--card-background); border: none; box-shadow: var(--shadow-l2); margin-bottom: 8px; border-radius: 16px; } } } /* links页面改三栏 */ @media (min-width: 1024px) { .article-list--compact.links { display: grid; grid-template-columns: 1fr 1fr 1fr; //三个1fr即为三栏,两个1fr则为双栏,以此类推即可. background: none; box-shadow: none; gap: 1rem; article { background: var(--card-background); border: none; box-shadow: var(--shadow-l2); margin-bottom: 8px; border-radius: var(--card-border-radius); \u0026amp;:nth-child(odd) { margin-right: 8px; } } } } /* 文章封面高度更改 */ .article-list article .article-image img { width: 100%; height: 150px; object-fit: cover; @include respond(md) { height: 200px; } @include respond(xl) { height: 305px; } } /* 全局页面布局间距调整 */ .main-container { min-height: 100vh; align-items: flex-start; padding: 0 15px; gap: var(--section-separation); padding-top: var(--main-top-padding); @include respond(md) { padding: 0 37px; } } .container { margin-left: auto; margin-right: auto; .left-sidebar { order: -3; max-width: var(--left-sidebar-max-width); } .right-sidebar { order: -1; max-width: var(--right-sidebar-max-width); /// Display right sidebar when min-width: lg @include respond(lg) { display: flex; } } \u0026amp;.extended { @include respond(md) { max-width: 1024px; --left-sidebar-max-width: 25%; --right-sidebar-max-width: 22% !important; } @include respond(lg) { max-width: 1280px; --left-sidebar-max-width: 20%; --right-sidebar-max-width: 30%; } @include respond(xl) { max-width: 1453px; //1536px; --left-sidebar-max-width: 15%; --right-sidebar-max-width: 25%; } } \u0026amp;.compact { @include respond(md) { --left-sidebar-max-width: 25%; max-width: 768px; } @include respond(lg) { max-width: 1024px; --left-sidebar-max-width: 20%; } @include respond(xl) { max-width: 1280px; } } } /* 全局页面小图片样式微调 */ .article-list--compact article .article-image img { width: var(--image-size); height: var(--image-size); object-fit: cover; border-radius: 17%; } 3.代码块样式修改:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 /* blog/assets/scss/custom.scss */ /* CodeBlock settings ⬇ */ .highlight { max-width: 102% !important; background-color: var(--pre-background-color); padding: var(--card-padding); position: relative; border-radius: 20px; margin-left: -7px !important; margin-right: -12px; box-shadow: var(--shadow-l1) !important; \u0026amp;:hover { .copyCodeButton { opacity: 1; } } // keep Codeblocks LTR [dir=\u0026#34;rtl\u0026#34;] \u0026amp; { direction: ltr; } pre { margin: initial; padding: 0; margin: 0; width: auto; } } /* use macos format */ .article-content { .highlight:before { content: \u0026#34;\u0026#34;; display: block; background: url(/img/code-header.svg); height: 32px; width: 100%; background-size: 57px; background-repeat: no-repeat; margin-bottom: 5px; background-position: -1px 2px; } } /* adjust light mode format */ [data-scheme=\u0026#34;light\u0026#34;] .article-content .highlight { background-color: #fff9f3; } [data-scheme=\u0026#34;light\u0026#34;] .chroma { color: #ff6f00; background-color: #fff9f3cc; } /* Codeblock settings completed. */ 添加代码块折叠效果\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 \u0026lt;!-- blog/layouts/partials/footer/custom.html --\u0026gt; \u0026lt;style\u0026gt; .highlight { max-height: 300px; overflow: hidden; } .code-show { max-height: none !important; } .code-more-box { width: 100%; padding-top: 78px; background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0)), to(#fff)); position: absolute; left: 0; right: 0; bottom: 0; z-index: 1; } .code-more-btn { display: block; margin: auto; width: 44px; height: 22px; background: #f0f0f5; border-top-left-radius: 8px; border-top-right-radius: 8px; padding-top: 6px; cursor: pointer; } .code-more-img { cursor: pointer !important; display: block; margin: auto; width: 22px; height: 16px; } \u0026lt;/style\u0026gt; \u0026lt;script\u0026gt; function initCodeMoreBox() { let codeBlocks = document.querySelectorAll(\u0026#34;.highlight\u0026#34;); if (!codeBlocks) { return; } codeBlocks.forEach(codeBlock =\u0026gt; { // 校验是否overflow if (codeBlock.scrollHeight \u0026lt;= codeBlock.clientHeight) { return; } // 元素初始化 // codeMoreBox let codeMoreBox = document.createElement(\u0026#39;div\u0026#39;); codeMoreBox.classList.add(\u0026#39;code-more-box\u0026#39;); // codeMoreBtn let codeMoreBtn = document.createElement(\u0026#39;span\u0026#39;); codeMoreBtn.classList.add(\u0026#39;code-more-btn\u0026#39;); codeMoreBtn.addEventListener(\u0026#39;click\u0026#39;, () =\u0026gt; { codeBlock.classList.add(\u0026#39;code-show\u0026#39;); codeMoreBox.style.display = \u0026#39;none\u0026#39;; // 触发resize事件，重新计算目录位置 window.dispatchEvent(new Event(\u0026#39;resize\u0026#39;)) }) // img let img = document.createElement(\u0026#39;img\u0026#39;); img.classList.add(\u0026#39;code-more-img\u0026#39;); img.src = \u0026#34;/icons/arrow.png\u0026#34;; // 元素添加 codeMoreBtn.appendChild(img); codeMoreBox.appendChild(codeMoreBtn); codeBlock.appendChild(codeMoreBox) }) } initCodeMoreBox(); \u0026lt;/script\u0026gt; 4.DIY-添加横幅:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 /* 主页添加横幅 */ /* part 1 */ /* HUGO_SITE_FOLDER/assets/scss/custom.scss */ .welcome { color: var(--card-text-color-main); background: var(--card-background); box-shadow: var(--shadow-l2); border-radius: 30px; display: inline-block; } // 实现字符跳动动画 .jump-text1 { display: inline-block; animation: jump 0.5s 1; } .jump-text2 { display: inline-block; animation: jump 0.5s 1; animation-delay: 0.1s; } .jump-text3 { display: inline-block; animation: jump 0.5s 1; animation-delay: 0.2s; } @keyframes jump { 0% { transform: translateY(0); } 50% { transform: translateY(-20px); } 100% { transform: translateY(0); } } /* part 2 */ /* blog/layouts/index.html */ \u0026lt;!-- 首页欢迎字幅 --\u0026gt; \u0026lt;div class=\u0026#34;welcome\u0026#34;\u0026gt; \u0026lt;p style=\u0026#34;font-size: 2rem; text-align: center; font-weight: bold\u0026#34;\u0026gt; \u0026lt;!-- \u0026lt;span class=\u0026#34;shake\u0026#34;\u0026gt;👋\u0026lt;/span\u0026gt; --\u0026gt; \u0026lt;span class=\u0026#34;jump-text1\u0026#34;\u0026gt; Welcome\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;jump-text2\u0026#34;\u0026gt; Back \u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;jump-text3\u0026#34; style=\u0026#34;color:#e99312;\u0026#34;\u0026gt;Rei\u0026lt;/span\u0026gt; \u0026lt;!-- \u0026lt;span class=\u0026#34;jump-text4\u0026#34;style=\u0026#34;color:#e99312\u0026#34;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;jump-text5\u0026#34; style=\u0026#34;color:#e99312\u0026#34;\u0026gt;a\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;jump-text6\u0026#34; style=\u0026#34;color:#e99312\u0026#34;\u0026gt;o\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;jump-text7\u0026#34; style=\u0026#34;color:#e99312\u0026#34;\u0026gt;k\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;jump-text8\u0026#34; style=\u0026#34;color:#e99312\u0026#34;\u0026gt;\u0026#39;s\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;jump-text9\u0026#34; style=\u0026#34;color:#e99312\u0026#34;\u0026gt;Blog\u0026lt;/span\u0026gt; --\u0026gt; \u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- 首页欢迎字幅 --\u0026gt; 5.DIY-添加Blog运行时间\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \u0026lt;!-- layouts/partials/footer/custom.html --\u0026gt; \u0026lt;script\u0026gt; let s1 = \u0026#39;2025-1-19\u0026#39;; //website start date s1 = new Date(s1.replace(/-/g, \u0026#34;/\u0026#34;)); let s2 = new Date(); let timeDifference = s2.getTime() - s1.getTime(); let days = Math.floor(timeDifference / (1000 * 60 * 60 * 24)); let hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)); let minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60)); let result = days + \u0026#34; 天 \u0026#34; + hours + \u0026#34; 小时 \u0026#34; + minutes + \u0026#34; 分钟\u0026#34;; document.getElementById(\u0026#39;runningdays\u0026#39;).innerHTML = result; \u0026lt;/script\u0026gt; \u0026lt;!-- layouts/partials/footer/footer.html --\u0026gt; \u0026lt;!-- Add blog running time --\u0026gt; \u0026lt;section class=\u0026#34;running-time\u0026#34;\u0026gt; 本博客已稳定运行 \u0026lt;span id=\u0026#34;runningdays\u0026#34; class=\u0026#34;running-days\u0026#34;\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;/section\u0026gt; 内嵌网页视频 Hugo可以通过建立shortcode的方式来内嵌网页视频(读取bilibili内置的iframe代码，2025.03.20还有效)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 \u0026lt;!-- layouts/shortcodes/bilibili.html --\u0026gt; \u0026lt;div style=\u0026#34;position:relative; padding-bottom:56.25%; width:100%; height:0\u0026#34;\u0026gt; \u0026lt;iframe src=\u0026#34;//player.bilibili.com/player.html?bvid={{.Get 0 }}\u0026amp;amp;page={{ if .Get 1 }}{{.Get 1}}{{ else }}1{{end}}\u0026amp;amp;as_wide=1\u0026amp;high_quality=1\u0026amp;amp;autoplay=0\u0026#34; scrolling=\u0026#34;no\u0026#34; border=\u0026#34;0\u0026#34; frameborder=\u0026#34;no\u0026#34; framespacing=\u0026#34;0\u0026#34; allowfullscreen=\u0026#34;true\u0026#34; style=\u0026#34;position:absolute; height: 100%; width: 100%;\u0026#34; \u0026gt; \u0026lt;/iframe\u0026gt; \u0026lt;/div\u0026gt; 相关说明：创建一个响应式容器，根据视频比例自适应大小。\nposition:relative：为子元素(iframe)的绝对定位提供参考。 padding-bottom:56.25%：通过内边距的百分比(宽度的56.25%)维持容器的宽高比例(16:9)，确保视频高度随宽度变化。 width:100%; height:0：宽度占满父容器，高度由 padding-bottom 动态计算。 嵌入视频的 \u0026lt;iframe\u0026gt;\n1 2 3 4 5 6 7 8 9 10 \u0026lt;iframe src=\u0026#34;//player.bilibili.com/player.html?bvid={{.Get 0 }}\u0026amp;amp;page={{ if .Get 1 }}{{.Get 1}}{{ else }}1{{end}}\u0026amp;amp;as_wide=1\u0026amp;high_quality=1\u0026amp;amp;autoplay=0\u0026#34; scrolling=\u0026#34;no\u0026#34; border=\u0026#34;0\u0026#34; frameborder=\u0026#34;no\u0026#34; framespacing=\u0026#34;0\u0026#34; allowfullscreen=\u0026#34;true\u0026#34; style=\u0026#34;position:absolute; height: 100%; width: 100%;\u0026#34; \u0026gt; \u0026lt;/iframe\u0026gt; 1. src 属性\n1 src=\u0026#34;//player.bilibili.com/player.html?bvid={{.Get 0 }}\u0026amp;amp;page={{ if .Get 1 }}{{.Get 1}}{{ else }}1{{end}}\u0026amp;amp;as_wide=1\u0026amp;high_quality=1\u0026amp;amp;autoplay=0\u0026#34; 说明：指定嵌入的哔哩哔哩播放器地址及参数。 bvid={{.Get 0}}：通过 Hugo Shortcode 的第一个参数（{{.Get 0}}）传入视频的 BV 号（如 BV1xx411x7xx）。 page=...：通过第二个参数（{{.Get 1}}）指定视频的分页（分P），未提供时默认为 1。 as_wide=1：启用宽屏模式。 high_quality=1：默认使用高清画质。 autoplay=0：禁止自动播放（设为 1 可启用）。 2. 其他属性\nscrolling=\u0026quot;no\u0026quot;：禁用 iframe 滚动条。 border=\u0026quot;0\u0026quot;、frameborder=\u0026quot;no\u0026quot;：隐藏 iframe 边框。 framespacing=\u0026quot;0\u0026quot;：移除框架间距。 allowfullscreen=\u0026quot;true\u0026quot;：允许全屏播放。 3. 内联样式\n1 style=\u0026#34;position:absolute; height: 100%; width: 100%;\u0026#34; 作用：让 iframe 填满外层容器。 position:absolute：基于外层容器绝对定位。 height: 100%; width: 100%：占满外层容器的全部空间。 ","date":"2025-02-14T22:28:15+08:00","permalink":"https://blog.christinaxy.fun/post/hugo-stack-mod/","title":"赛博小屋装修记"}]